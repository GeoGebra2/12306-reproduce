nodes:
  ROOT:
    type: REQUIREMENT
    name: 12306购票系统
    description: 基于Web的铁路购票系统，包含用户认证、车票查询、预订、订单管理及个人中心等核心功能，首页参考图片：[image](./reference/index.png)。logo资源位于项目根目录的assets/logo.png，在合适的位置引用图片链接。
  REQ-1:
    type: REQUIREMENT
    name: 用户认证模块
    description: 系统的基础设施，提供用户身份识别与管理能力。
  REQ-1-1:
    type: REQUIREMENT
    name: 用户注册
    description: 新用户创建账户，并初始化必要的关联数据。注册表单参考图片：[image](./reference/auth/register.png)
  REQ-1-2:
    type: REQUIREMENT
    name: 用户登录
    description: 验证用户身份并建立会话。登录表单参考图片：[image](./reference/auth/login.png)
  REQ-2:
    type: REQUIREMENT
    name: 车票查询模块
    description: 查询检索车票。
  REQ-2-1:
    type: REQUIREMENT
    name: 首页快捷查询面板
    description: 快捷查询单程车票，快捷查询面板参考图片：[image](./reference/search/quick_search.png)
  REQ-2-1-1:
    type: REQUIREMENT
    name: 出发地快捷输入
    description: 点击出发地输入框，弹出快捷选择框，支持输入和快捷选择。出发地快捷选择参考图片：[image](./reference/search/quick_address.png)
  REQ-2-1-2:
    type: REQUIREMENT
    name: 目的地快捷输入
    description: 点击目的地输入框，弹出快捷选择框，支持输入和快捷选择。目的地快捷选择参考图片：[image](./reference/search/quick_address.png)
  REQ-2-1-3:
    type: REQUIREMENT
    name: 选择出发日期
    description: 点击出发日期输入框，弹出出发日期选择组件，参考图片：[image](./reference/search/quick_date.png)
  REQ-2-2:
    type: REQUIREMENT
    name: 车次列表页
    description: 展示车次数据，提供查询、筛选功能。参考图片：[image](./reference/search/result.png)
  REQ-2-2-1:
    type: REQUIREMENT
    name: 车票查询框
    description: 位于车票列表页上方的查询框，用于输入查询条件（如出发地、目的地、出发日期）。参考图片：[image](./reference/search/query.png)
  REQ-2-2-2:
    type: REQUIREMENT
    name: 车次筛选
    description: 位于车次列表中查询框下方的筛选框，用于根据条件筛选车次（车次类型、车次席别）。参考图片：[image](./reference/search/filter.png)
  REQ-2-2-3:
    type: REQUIREMENT
    name: 车次列表
    description: 位于车次列表页下方，核心功能，调用后端接口展示符合筛选条件的车次列表，参考图片：[image](./reference/search/result.png)
  REQ-3:
    type: REQUIREMENT
    name: 个人中心
    description: 管理购票所需的常用数据（如查看个人信息，乘车人）。参考图片：[image](./reference/center/self.png)
  REQ-3-1:
    type: REQUIREMENT
    name: 查看个人信息
    description: 查看用户基本信息，参考图片：[image](./reference/center/info.png)
  REQ-3-2:
    type: REQUIREMENT
    name: 乘车人管理
    description: 管理账户关联乘车人，参考图片：[image](./reference/center/passenger.png)
  REQ-3-2-1:
    type: REQUIREMENT
    name: 添加乘车人
    description: 添加新的乘车人，添加乘车人表单参考图片：[image](./reference/center/add_passenger.png)
  REQ-3-2-2:
    type: REQUIREMENT
    name: 删除乘车人
    description: 删除已添加的乘车人，不能删除账号本人，删除确认框参考图片：[image](./reference/center/delete_passenger.png)
  REQ-4:
    type: REQUIREMENT
    name: 订单管理模块
    description: 核心业务流程，预订车次，生成订单；查看、取消和支付订单。
  REQ-4-1:
    type: REQUIREMENT
    name: 订单管理页
    description: 查看订单列表框架。参考图片：[image](./reference/order/order.png)
  REQ-4-2:
    type: REQUIREMENT
    name: 预订车次
    description: 车次列表页点击预订，跳转到订单填写页，生成订单，订单填写页参考图片：[image](./reference/order/book.png)
  REQ-4-3:
    type: REQUIREMENT
    name: 取消订单
    description: 在未完成订单管理页，点击未完成订单的“取消订单”按钮，删除订单，参考图片：[image](./reference/order/cancel.png)
  REQ-4-4:
    type: REQUIREMENT
    name: 支付订单
    description: 在未完成订单管理页，点击未完成订单的“支付订单”按钮，跳转到支付页，参考图片：[image](./reference/order/pay.png)
  HomePage:
    type: UI
    path: frontend/src/pages/HomePage.jsx
    description: Home Page Container
  API_ROOT:
    type: API
    path: backend/src/index.js
    signature: GET /
  UI-REQ-1-LOGIN-PAGE:
    type: UI
    path: frontend/src/pages/LoginPage.jsx
    description: Login Page Container
  UI-REQ-1-REGISTER-PAGE:
    type: UI
    path: frontend/src/pages/RegisterPage.jsx
    description: Register Page Container
  API-REQ-1-LOGIN:
    type: API
    path: backend/src/routes/auth.js
    signature: POST /api/auth/login
  API-REQ-1-REGISTER:
    type: API
    path: backend/src/routes/auth.js
    signature: POST /api/auth/register
  API-STATION-HOT:
    type: API
    path: GET /api/stations/hot
    signature: GET /api/stations/hot
  FUNC-STATION-HOT:
    type: FUNC
    path: 12306-mirror/backend/src/services/stationService.js
    signature: getHotStations()
    db_tables:
      - stations
  stationService.getHotStations:
    type: FUNC
    path: backend/src/services/stationService.js
    signature: getHotStations()
    db_tables:
      - stations
  GET /api/stations/hot:
    type: API
    path: backend/src/routes/stations.js
    signature: GET /api/stations/hot
  QuickSearchPanel:
    type: UI
    path: frontend/src/pages/components/QuickSearchPanel.jsx
    description: Updated QuickSearchPanel with hot stations and destination search
  REQ-2-1-3:UI:DatePicker:
    type: UI
    path: frontend/src/pages/components/DatePicker.jsx
    description: Custom DatePicker component for selecting departure date, showing current and next month.
edges:
  - from: ROOT
    to: REQ-1
    relation: HAS_CHILD
  - from: REQ-1
    to: REQ-1-1
    relation: HAS_CHILD
  - from: REQ-1
    to: REQ-1-2
    relation: HAS_CHILD
  - from: ROOT
    to: REQ-2
    relation: HAS_CHILD
  - from: REQ-2
    to: REQ-2-1
    relation: HAS_CHILD
  - from: REQ-2-1
    to: REQ-2-1-1
    relation: HAS_CHILD
  - from: REQ-2-1
    to: REQ-2-1-2
    relation: HAS_CHILD
  - from: REQ-2-1
    to: REQ-2-1-3
    relation: HAS_CHILD
  - from: REQ-2
    to: REQ-2-2
    relation: HAS_CHILD
  - from: REQ-2-2
    to: REQ-2-2-1
    relation: HAS_CHILD
  - from: REQ-2-2
    to: REQ-2-2-2
    relation: HAS_CHILD
  - from: REQ-2-2
    to: REQ-2-2-3
    relation: HAS_CHILD
  - from: ROOT
    to: REQ-3
    relation: HAS_CHILD
  - from: REQ-3
    to: REQ-3-1
    relation: HAS_CHILD
  - from: REQ-3
    to: REQ-3-2
    relation: HAS_CHILD
  - from: REQ-3-2
    to: REQ-3-2-1
    relation: HAS_CHILD
  - from: REQ-3-2
    to: REQ-3-2-2
    relation: HAS_CHILD
  - from: ROOT
    to: REQ-4
    relation: HAS_CHILD
  - from: REQ-4
    to: REQ-4-1
    relation: HAS_CHILD
  - from: REQ-4
    to: REQ-4-2
    relation: HAS_CHILD
  - from: REQ-4
    to: REQ-4-3
    relation: HAS_CHILD
  - from: REQ-4
    to: REQ-4-4
    relation: HAS_CHILD
  - from: ROOT
    to: HomePage
    relation: DEFINES
  - from: ROOT
    to: API_ROOT
    relation: DEFINES
  - from: REQ-1
    to: UI-REQ-1-LOGIN-PAGE
    relation: DEFINES
  - from: ROOT-HOME-PAGE
    to: UI-REQ-1-LOGIN-PAGE
    relation: CALLS
  - from: REQ-1
    to: UI-REQ-1-REGISTER-PAGE
    relation: DEFINES
  - from: ROOT-HOME-PAGE
    to: UI-REQ-1-REGISTER-PAGE
    relation: CALLS
  - from: REQ-1
    to: API-REQ-1-LOGIN
    relation: DEFINES
  - from: REQ-1
    to: API-REQ-1-REGISTER
    relation: DEFINES
  - from: req_2_1_2_main
    to: API-STATION-HOT
    relation: DEFINES
  - from: FUNC-STATION-HOT
    to: API-STATION-HOT
    relation: CALLS
  - from: API-STATION-HOT
    to: UI-QUICK-SEARCH-PANEL
    relation: CALLS
  - from: req_2_1_2_main
    to: FUNC-STATION-HOT
    relation: DEFINES
  - from: REQ-2-1-2
    to: stationService.getHotStations
    relation: DEFINES
  - from: REQ-2-1-2
    to: GET /api/stations/hot
    relation: DEFINES
  - from: GET /api/stations/hot
    to: stationService.getHotStations
    relation: CALLS
  - from: REQ-2-1-2
    to: QuickSearchPanel
    relation: DEFINES
  - from: GET /api/stations/hot
    to: QuickSearchPanel
    relation: CALLS
  - from: REQ-2-1-3
    to: REQ-2-1-3:UI:DatePicker
    relation: DEFINES
  - from: REQ-2-1-3:UI:DatePicker
    to: REQ-2-1
    relation: CALLS
